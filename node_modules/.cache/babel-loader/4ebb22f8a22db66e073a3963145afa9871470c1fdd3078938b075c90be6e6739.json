{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.WindowWindowChannel = void 0;\nconst connect_common_1 = require(\"@trezor/connect-common\");\nclass WindowWindowChannel extends connect_common_1.AbstractMessageChannel {\n  constructor({\n    windowHere,\n    windowPeer,\n    channel,\n    logger,\n    origin\n  }) {\n    super({\n      channel,\n      sendFn: message => {\n        var _a;\n        (_a = windowPeer()) === null || _a === void 0 ? void 0 : _a.postMessage(message, origin);\n      },\n      logger\n    });\n    this._listener = this.listener.bind(this);\n    this._windowHere = windowHere;\n    this.connect();\n  }\n  listener(event) {\n    const message = Object.assign(Object.assign({}, event.data), {\n      success: true,\n      origin: event.origin,\n      payload: event.data.payload || {},\n      channel: event.data.channel || {\n        peer: this.channel.here,\n        here: this.channel.peer\n      }\n    });\n    this.onMessage(message);\n  }\n  connect() {\n    this._windowHere.addEventListener('message', this._listener);\n    this.isConnected = true;\n  }\n  disconnect() {\n    if (!this.isConnected) return;\n    this._windowHere.removeEventListener('message', this._listener);\n    this.isConnected = false;\n  }\n}\nexports.WindowWindowChannel = WindowWindowChannel;","map":{"version":3,"names":["Object","defineProperty","exports","value","WindowWindowChannel","connect_common_1","require","AbstractMessageChannel","constructor","windowHere","windowPeer","channel","logger","origin","sendFn","message","_a","postMessage","_listener","listener","bind","_windowHere","connect","event","assign","data","success","payload","peer","here","onMessage","addEventListener","isConnected","disconnect","removeEventListener"],"sources":["C:/Users/delll/Desktop/mini/node_modules/@trezor/connect-web/lib/channels/window-window.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.WindowWindowChannel = void 0;\nconst connect_common_1 = require(\"@trezor/connect-common\");\nclass WindowWindowChannel extends connect_common_1.AbstractMessageChannel {\n    constructor({ windowHere, windowPeer, channel, logger, origin, }) {\n        super({\n            channel,\n            sendFn: (message) => {\n                var _a;\n                (_a = windowPeer()) === null || _a === void 0 ? void 0 : _a.postMessage(message, origin);\n            },\n            logger,\n        });\n        this._listener = this.listener.bind(this);\n        this._windowHere = windowHere;\n        this.connect();\n    }\n    listener(event) {\n        const message = Object.assign(Object.assign({}, event.data), { success: true, origin: event.origin, payload: event.data.payload || {}, channel: event.data.channel || {\n                peer: this.channel.here,\n                here: this.channel.peer,\n            } });\n        this.onMessage(message);\n    }\n    connect() {\n        this._windowHere.addEventListener('message', this._listener);\n        this.isConnected = true;\n    }\n    disconnect() {\n        if (!this.isConnected)\n            return;\n        this._windowHere.removeEventListener('message', this._listener);\n        this.isConnected = false;\n    }\n}\nexports.WindowWindowChannel = WindowWindowChannel;\n//# sourceMappingURL=window-window.js.map"],"mappings":"AAAA,YAAY;;AACZA,MAAM,CAACC,cAAc,CAACC,OAAO,EAAE,YAAY,EAAE;EAAEC,KAAK,EAAE;AAAK,CAAC,CAAC;AAC7DD,OAAO,CAACE,mBAAmB,GAAG,KAAK,CAAC;AACpC,MAAMC,gBAAgB,GAAGC,OAAO,CAAC,wBAAwB,CAAC;AAC1D,MAAMF,mBAAmB,SAASC,gBAAgB,CAACE,sBAAsB,CAAC;EACtEC,WAAWA,CAAC;IAAEC,UAAU;IAAEC,UAAU;IAAEC,OAAO;IAAEC,MAAM;IAAEC;EAAQ,CAAC,EAAE;IAC9D,KAAK,CAAC;MACFF,OAAO;MACPG,MAAM,EAAGC,OAAO,IAAK;QACjB,IAAIC,EAAE;QACN,CAACA,EAAE,GAAGN,UAAU,CAAC,CAAC,MAAM,IAAI,IAAIM,EAAE,KAAK,KAAK,CAAC,GAAG,KAAK,CAAC,GAAGA,EAAE,CAACC,WAAW,CAACF,OAAO,EAAEF,MAAM,CAAC;MAC5F,CAAC;MACDD;IACJ,CAAC,CAAC;IACF,IAAI,CAACM,SAAS,GAAG,IAAI,CAACC,QAAQ,CAACC,IAAI,CAAC,IAAI,CAAC;IACzC,IAAI,CAACC,WAAW,GAAGZ,UAAU;IAC7B,IAAI,CAACa,OAAO,CAAC,CAAC;EAClB;EACAH,QAAQA,CAACI,KAAK,EAAE;IACZ,MAAMR,OAAO,GAAGf,MAAM,CAACwB,MAAM,CAACxB,MAAM,CAACwB,MAAM,CAAC,CAAC,CAAC,EAAED,KAAK,CAACE,IAAI,CAAC,EAAE;MAAEC,OAAO,EAAE,IAAI;MAAEb,MAAM,EAAEU,KAAK,CAACV,MAAM;MAAEc,OAAO,EAAEJ,KAAK,CAACE,IAAI,CAACE,OAAO,IAAI,CAAC,CAAC;MAAEhB,OAAO,EAAEY,KAAK,CAACE,IAAI,CAACd,OAAO,IAAI;QAC9JiB,IAAI,EAAE,IAAI,CAACjB,OAAO,CAACkB,IAAI;QACvBA,IAAI,EAAE,IAAI,CAAClB,OAAO,CAACiB;MACvB;IAAE,CAAC,CAAC;IACR,IAAI,CAACE,SAAS,CAACf,OAAO,CAAC;EAC3B;EACAO,OAAOA,CAAA,EAAG;IACN,IAAI,CAACD,WAAW,CAACU,gBAAgB,CAAC,SAAS,EAAE,IAAI,CAACb,SAAS,CAAC;IAC5D,IAAI,CAACc,WAAW,GAAG,IAAI;EAC3B;EACAC,UAAUA,CAAA,EAAG;IACT,IAAI,CAAC,IAAI,CAACD,WAAW,EACjB;IACJ,IAAI,CAACX,WAAW,CAACa,mBAAmB,CAAC,SAAS,EAAE,IAAI,CAAChB,SAAS,CAAC;IAC/D,IAAI,CAACc,WAAW,GAAG,KAAK;EAC5B;AACJ;AACA9B,OAAO,CAACE,mBAAmB,GAAGA,mBAAmB","ignoreList":[]},"metadata":{},"sourceType":"script","externalDependencies":[]}